<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Doce Criativo App</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/vendas.css">
    <link rel="stylesheet" href="css/pedido.css">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="app-body">
    
    <main id="app-container">
        <div id="alert-container"></div>

        <div id="auth-screen" class="app-view active" style="padding-top: 15vh;">
            <div class="login-card-app">
                <h1 class="logo-app">Doce Criativo</h1>
                <p class="slogan-app">Bem-vindo(a)! Fa√ßa seu login ou cadastro r√°pido.</p>
                
                <div id="login-form-group">
                    <div class="form-group">
                        <label for="auth-telefone">Seu WhatsApp/Telefone *</label>
                        <input type="tel" id="auth-telefone" placeholder="(99) 99999-9999" required>
                    </div>
                    <button id="btn-iniciar-sessao" class="btn-login-app">
                        <i class="fas fa-sign-in-alt"></i> Entrar ou Cadastrar
                    </button>
                    <p class="auth-note">O login √© feito pelo seu n√∫mero. Se for seu primeiro acesso, faremos um cadastro r√°pido!</p>
                </div>
                
                <form id="cadastro-form" style="display: none; margin-top: 2rem;">
                    <h3><i class="fas fa-user-plus"></i> Cadastro R√°pido</h3>
                    <input type="hidden" id="cadastro-telefone-hidden">
                    <div class="form-group">
                        <label for="cadastro-nome">Nome Completo *</label>
                        <input type="text" id="cadastro-nome" required>
                    </div>
                    <div class="form-group">
                        <label for="cadastro-endereco">Seu Endere√ßo *</label>
                        <textarea id="cadastro-endereco" rows="2" required placeholder="Rua, n√∫mero, bairro"></textarea>
                    </div>
                    <button type="submit" id="btn-finalizar-cadastro" class="btn-login-app">
                        Finalizar Cadastro
                    </button>
                </form>

            </div>
        </div>

        <div id="view-inicio" class="app-view">
             <header class="app-header">
                <h1 class="logo-app">In√≠cio</h1>
                <div id="profile-display">
                    <span id="profile-name"></span>
                    <button id="logout-btn-app" class="btn-icon"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </header>
            <div class="app-content-scroll">
                <section class="card-app">
                    <h2>üëã Ol√°, <span id="home-cliente-nome">Cliente</span>!</h2>
                    <p>Seu app de pedidos oficial da **Doce Criativo**.</p>
                </section>
                <section class="card-app">
                    <h2><i class="fas fa-history"></i> Status do √öltimo Pedido</h2>
                    <div id="status-ultimo-pedido">Nenhum pedido recente.</div>
                </section>
                <section class="card-app">
                    <h2><i class="fas fa-tags"></i> Oferta do Dia</h2>
                    <div id="oferta-dia">Veja na aba Promo√ß√µes!</div>
                </section>
            </div>
        </div>

        <div id="view-cardapio" class="app-view">
            <header class="app-header">
                <h1 class="logo-app">Card√°pio</h1>
            </header>
            <div class="app-content-scroll">
                <section class="categorias">
                    <h2>Categorias</h2>
                    <div class="categorias-botoes" id="categorias-container"></div>
                </section>
                <section class="produtos">
                    <h2>Produtos</h2>
                    <div class="produtos-grid" id="produtos-container"></div>
                </section>
            </div>
        </div>

        <div id="view-promocoes" class="app-view">
             <header class="app-header">
                <h1 class="logo-app">Promo√ß√µes</h1>
            </header>
            <div class="app-content-scroll">
                 <section class="card-app">
                    <p>Aqui apareceriam seus produtos em destaque ou cupons de desconto.</p>
                    <p>*(Funcionalidade a ser implementada no futuro, mas a estrutura est√° pronta!)*</p>
                 </section>
            </div>
        </div>

        <div id="view-carrinho" class="app-view">
            <header class="app-header">
                <h1 class="logo-app">Carrinho</h1>
            </header>
            <div class="app-content-scroll">
                <section class="carrinho card-app">
                    <h2 style="border: none;"><i class="fas fa-shopping-bag"></i> Seu Pedido</h2>
                    <div class="carrinho-itens" id="carrinho-itens"></div>
                    <div class="carrinho-total">
                        <strong>Total: R$ <span id="total-carrinho">0,00</span></strong>
                    </div>
                </section>
                
                <section class="card-pedido card-app">
                    <h2><i class="fas fa-map-marker-alt"></i> Entrega e Pagamento</h2>
                    <p>Entrega para: <strong id="carrinho-endereco-display">N/A</strong></p>
                    <p>Cliente: <strong id="carrinho-cliente-nome">N/A</strong></p>
                    
                    <div class="form-group" style="margin-top: 1rem;">
                        <label for="carrinho-endereco-input">Alterar Endere√ßo</label>
                        <textarea id="carrinho-endereco-input" rows="2" required></textarea>
                    </div>

                    <div class="pagamento" style="margin-top: 1.5rem;">
                        <label style="font-weight: bold; margin-bottom: 5px; display: block;">Forma de Pagamento</label>
                        <div class="opcoes-pagamento">
                            </div>
                    </div>
                </section>
            </div>
            
            <footer class="finalizar-app">
                 <div class="finalizar-actions">
                    <button id="finalizar-pedido-direto" class="btn-login-app" style="background: var(--rosa-escuro);">
                        <i class="fas fa-check-circle"></i> Finalizar Pedido
                    </button>
                    <button id="enviar-pedido-whatsapp" class="btn-whatsapp-app">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </button>
                 </div>
            </footer>
        </div>
        
    </main>

    <nav id="mobile-bottom-nav" style="display: none;">
        <button class="nav-item-app active" data-view="view-inicio">
            <i class="fas fa-home"></i> <span>In√≠cio</span>
        </button>
        <button class="nav-item-app" data-view="view-cardapio">
            <i class="fas fa-utensils"></i> <span>Card√°pio</span>
        </button>
        <button class="nav-item-app" data-view="view-promocoes">
            <i class="fas fa-tags"></i> <span>Promo</span>
        </button>
        <button class="nav-item-app" data-view="view-carrinho">
            <i class="fas fa-shopping-cart"></i> <span>Carrinho</span>
        </button>
    </nav>


    <script>
        const SUPABASE_URL = 'https://jdfijbhlujoiuraoxivb.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkZmlqYmhsdWpvaXVyYW94aXZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NDE3MzgsImV4cCI6MjA3NDQxNzczOH0.yEMThoZdXPx1aNCO1a6wO-FPoMU-gTgxJlsW883rKvc';
        window.supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>

    <script src="js/supabase-vendas.js"></script>
    <script src="js/pedido.js"></script>

</body>
</html>